<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="shortcut icon" href="image/cloudy.png" type="image/png">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="js/main.js"></script>


    <title>Weather</title>
</head>

<body>

    <div class="containter-fluid main_menu">
        <div class="row">
            <div class="col-md-10 col-12 mx-auto">
                <nav class="navbar navbar-expand-lg sticky-top">
                    <div class="container-fluid">
                        <div class="">
                            <a class="navbar-brand" href="index.html">
                                <img src="image/cloudy.png" alt="" width="30" height="24"
                                    class="d-inline-block align-text-top">
                                <span class="bname"> Weather</span>
                            </a>
                        </div>
                        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                            data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup"
                            aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                            <div class="navbar-nav">
                                <a class="nav-link active" aria-current="page" href="index.html">Home</a>
                                <a class="nav-link" href="weather.html">Weather</a>

                                <a class="nav-link" href="about.html">About</a>


                                <a class="nav-link" href="contact.html">Contact</a>
                                <a class="nav-link" target="_blink" href="https://github.com/milandudhat">Other
                                    projects</a>

                            </div>
                        </div>
                    </div>
                </nav>
            </div>

        </div>

    </div>



    <div class="container-sm main_header_search mx-lg-auto">
        <div class="contziner-fluid main_header">
            <div class="row">
                <div class="col-md-10 col-12 mx-auto">
                    <div class="main_content main">
                        <div class="container mt-4">
                            <div class="row">
                                <div class="col-md-12">
                                    <!--To use the full functionality visit https://www.algolia.com-->
                                    <h6 class="text-center serch_txt">Type your location(Surat, Mumbai, Delhi)
                                        <form action="weather.html" class="d-flex">

                                            <input id="search_name" class="form-control me-2 search-box mx-auto"
                                                placeholder="Search" aria-label="Search">
                                            <input id="submitbt" type="submit"
                                                class="btn btn-outline-success search-btn" value="search">
                                        </form>


                                </div>
                            </div>
                        </div>
                        <div class="container-fluid px-1 px-md-4  mx-auto">
                            <div class="row d-flex justify-content-center px-3">
                                <div class="card">
                                    <h2 id="city_name" class="ml-auto mr-4 mt-3 mb-0 text-center">Get Output here</h2>
                                    <p id="cloud" class="ml-auto mr-4 mb-0 med-font text-center"></p>
                                    <h1 id="" class="ml-auto mr-4 large-font text-center data_hide"><span
                                            id="temp"></span></h1>
                                    <p id="time_zone" class="time-font mb-0 ml-4 mt-auto"></p>
                                    <p id="time" class="ml-4 mb-4"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- footer  -->
    <footer class="background-footer justify-content-center align-content-center ">
        <div class="inner-footer">
            <div class="social-links">
                <ul class="responce-media">
                    <li class="social-items"><a href="https://www.instagram.com/_milan.dudhat_/" target="_blink"><i
                                class="fa-brands fa-instagram"></i></a></li>
                    <li class="social-items"><a href="https://www.facebook.com/milan.dudhat.5" target="_blink"><i
                                class="fa-brands fa-facebook-messenger"></i></a></li>
                    <li class="social-items"><a href="https://www.linkedin.com/in/milan-dudhat-b45166216/"
                            target="_blink"><i class="fa-brands fa-linkedin"></i></a></li>
                    <li class="social-items"><a href="https://github.com/milandudhat" target="_blink"><i
                                class="fa-brands fa-github-square"></i></a></li>
                    <li class="social-items"><a href="https://twitter.com/_milndudhat_" target="_blink"><i
                                class="fa-brands fa-twitter"></i></a></li>
                </ul>
            </div>
        </div>
        <p class="ftext ">
            Copyright &copy; 2022 - All rights reserved
        </p>
    </footer>

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
            <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
        -->
    <script>
        const submitbt = document.getElementById('submitbt');
        const search_name = document.getElementById('search_name');
        const city_name = document.getElementById('city_name');

        const temp = document.getElementById('temp');
        const cloud = document.getElementById('cloud')

        const time = document.getElementById("time")
        const timezone = document.getElementById('time_zone')

        const getinfo = async (event) => {
            console.log("45154");

            event.preventDefault();
            let city_value = search_name.value;
            if (city_value === '') {
                city_name.innerHTML = 'Please write the name before search'
            }
            else {
                try {

                    let url = `https://api.openweathermap.org/data/2.5/weather?q=${city_value}&units=metric&appid=825a744eff7a90f38312217d5859d499`;
                    const res = await fetch(url);
                    const data = await res.json();
                    const arrData = [data];


                    // change the data with static data

                    city_name.innerHTML = `${arrData[0].name} , ${arrData[0].sys.country}`;
                    temp.innerHTML = arrData[0].main.temp + '<sup>o</sup>C';
                    cloud.innerHTML = arrData[0].weather[0].main;



                    const getday = () => {
                        var weekday = new Array(7);
                        weekday[0] = "Sun";
                        weekday[1] = "Mon";
                        weekday[2] = "Tue";
                        weekday[3] = "Wed";
                        weekday[4] = "Thu";
                        weekday[5] = "Fri";
                        weekday[6] = "Sat";

                        let currentday = new Date();
                        console.log(weekday[currentday.getDay()]);
                        let day = weekday[currentday.getDay()]
                        return day;
                    };

                    const gettime_zone = () => {
                        var current = new Date();
                        let hours = current.getHours();
                        let minutes = current.getMinutes();


                        let mood = 'AM'
                        if (hours > 11) {
                            mood = 'PM';
                            if (hours > 12) hours -= 12;
                        }

                        if (minutes < 10) {
                            minutes = '0' + minutes
                        }

                        return `${hours}:${minutes}${mood}`;
                    };


                    const getcurrenttime = () => {

                        var months = [
                            "Jan",
                            "Feb",
                            "Mar",
                            "Apr",
                            "May",
                            "June",
                            "July",
                            "Aug",
                            "Sept",
                            "Oct",
                            "Nov",
                            "Dec",
                        ];

                        var current = new Date();
                        var month = months[current.getMonth()];
                        var day = current.getDate();
                        var year = current.getFullYear();



                        console.log(month + '/' + day);
                        return `${month} ${day} ${year}`;
                    };

                    getcurrenttime();
                    getday();
                    gettime_zone();


                    time.innerHTML = getday() + ' | ' + getcurrenttime();
                    time_zone.innerHTML = gettime_zone();


                } catch {
                    city_name.innerHTML = 'Please Enter valid city name'
                }
            }
        }


        submitbt.addEventListener('click', getinfo);

    </script>
</body>
<style>
    body {
        height: 100vh;
    }
</style>

</html>